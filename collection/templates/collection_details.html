<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    {% load custom_tags %}
    {% include "head.html" %}
    <title>means敏库</title>
</head>

<body>
<!-- Navigation -->
{% include "navigation.html" %}

<!-- Page Content -->
<div class="container">

    <!-- Page Heading/Breadcrumbs -->
    <h1 class="mt-4 mb-3">
        <small>{{ content.name }}</small>
    </h1>

    <ol class="breadcrumb" style="background-color: {% background_color %}">
        {% include "route.html" %}
        <li class="breadcrumb-item active">{{ content.name }}</li>
    </ol>

    <div class="row">

        <!-- Post Content Column -->
        <div class="col-lg-8">

            <!-- Preview Image -->
            <img class="img-fluid rounded" src="" alt="">

            <hr>
            <p>地址：{{ content.url }}
            <p>
                <!-- Post Content -->
            <p>{{ content.content }}</p>
            <hr>

            <!-- Comments Form -->
            <div class="card my-4">
                <h5 class="card-header">还请您留下对此网站的印象:</h5>
                <p>注：每个用户只能评价一次</p>
                <div class="card-body">
                    <form name="rateForm" id="rateForm" action="{% url 'collect_rate' %}" method="post">
                        <input type="text" class="form-control" name="collection" value="{{ content.id }}" hidden>
                        <label style="float:left">评分:&nbsp;</label>
                        <div class="score_show" style="float:left"></div>
                        <input type="range" class="custom-range" min="1" max="5" step="1" name="score" id="score"
                               aria-required="true">
                        <label>评分理由（请不要超过400字）:</label>
                        <div class="form-group">
                            <textarea class="form-control" rows="6" name="content" aria-required="true"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">提交</button>
                    </form>
                </div>
            </div>

            <!-- Comment with nested comments -->
            {% for value in rate_content %}
            <div class="media mb-4">
                <img class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50" alt="">
                <div class="media-body">
                    <h5 class="mt-0">{{ value.user }}</h5>
                    {{ value.content }}
                    <footer class="blockquote-footer">发表于:<cite title="Source Title">{{ value.create_datetime }}</cite></footer>
                    <div style="float:right"><a data-toggle="collapse" href="#comment_form" role="button"
                                                aria-expanded="false" aria-controls="comment_form">回复</a></div>
                    <div class="collapse input-group" id="comment_form">
                        <form name="commentForm" id="commentForm" action="{% url 'collection_rate_comment' %}"
                              method="post">
                            <div class="card card-body">
                                <input type="text" class="form-control" name="rate" value="{{ value.id }}" hidden>
                                <div class="input-group-prepend">
                                    <span class="input-group-text">您的回复:</span>
                                </div>
                                <textarea class="form-control" aria-label="With textarea" name="content"
                                          aria-required="true"></textarea>
                            </div>
                        </form>
                    </div>
                    {% for v in value.comment %}
                        <div class="media mt-4">
                            <img class="d-flex mr-3 rounded-circle" src="" alt="">
                            <div class="media-body">
                                <h5 class="mt-0">{{ v.user }}</h5>
                                {{ v.content }}
                                <footer class="blockquote-footer">发表于:<cite title="Source Title">{{ v.create_datetime }}</cite></footer>
                            </div>
                        </div>
                    {% endfor %}

                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Sidebar Widgets Column -->
        <div class="col-md-4">

            <!-- Side Widget -->
            <div class="card my-4">
                <h5 class="card-header">提示</h5>
                <div class="card-body">
                    <p>点击下方“访问”按钮，您将离开means网站，前往： {{ content.url }}</p>
                    <p>请注意您的帐号和财产安全！</p>
                </div>
                <a type="button" class="btn btn-primary" href="{{ content.url }}">访问</a>
            </div>

        </div>

    </div>
    <!-- /.row -->

</div>
<!-- /.container -->

<!-- Footer -->
{% include "footer.html" %}

<!-- Bootstrap core JavaScript -->
{% include "script.html" %}
<script>
$( document).ready(function() {
    $('#score').on('input', function(){
         v = $('#score').val();
         $('div.score_show').text(v);
    });
});


</script>

</body>

</html>

